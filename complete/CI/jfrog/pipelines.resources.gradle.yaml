resources:

# gradle PIPELINE
  - name: src_code_backapp_grdl
    type: GitRepo
    configuration:
      files:
        include: ^complete\/.+
        exclude: ^complete\/CI\/.+
      gitProvider: yann_github
      path: cyan21/gs-multi-module
      branches:
        include: jfrog

# DOCKER PIPELINE
  - name: src_dockerfile_backapp_grdl
    type: GitRepo
    configuration:
      files:
        include: ^complete\/CI\/Docker\/Dockerfile      
      gitProvider: yann_github
      path: cyan21/gs-multi-module
      branches:
        include: jfrog

  # Build info for the published grdl App
  - name: bi_backapp_grdl
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory_eu
      buildName: backapp_grdl
      buildNumber: ${run_number}

  - name: bi_backapp_grdl_promoted_staging
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory_eu
      buildName: backapp_grdl
      buildNumber: '${run_number}'

  - name: pb_backapp_grdl
    type: PropertyBag
    configuration:
      biNumber: XXX

  - name: fs_backapp_grdl
    type: FileSpec
    configuration:
      sourceArtifactory: artifactory_eu
      pattern: 'app-grdl-rc-local/**/multi-module-application*.jar'
      target: app/multi-module-application-1.0.0.jar
      props: "build.name=backapp_grdl;build.number=${res_pb_backapp_grdl_biNumber}"
      flat: true

  - name: bi_backapp_grdl_docker
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory_eu
      buildName: backapp_grdl_docker
      buildNumber: '${run_number}'

  - name: bi_backapp_grdl_docker_promoted_staging
    type: BuildInfo
    configuration:
      sourceArtifactory: artifactory_eu
      buildName: backapp_grdl_docker
      buildNumber: '${run_number}'
